<!--
  ~ Copyright 2017 Okta, Inc.
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~     http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->
<html xmlns:th="http://www.thymeleaf.org">

<head>
  <title>User Details</title>
  <!--/*/ <th:block th:include="head :: head"/> /*/-->


  <script src="https://global.oktacdn.com/okta-signin-widget/3.9.2/js/okta-sign-in.min.js"
    type="text/javascript"></script>
  <!-- <script src="https://ok1static.oktacdn.com/assets/js/sdk/okta-auth-js/3.9.2/okta-auth-js.min.js" type="text/javascript"></script> -->

  <script src="https://global.oktacdn.com/okta-auth-js/4.5.0/okta-auth-js.min.js" type="text/javascript"></script>
  <link href="/css/okta.css" rel="stylesheet" type="text/css" />
  <link href="https://global.oktacdn.com/okta-signin-widget/3.9.2/css/okta-sign-in.min.css" type="text/css"
    rel="stylesheet" />
  <!--<link href="https://ok1static.oktacdn.com/assets/js/sdk/okta-signin-widget/2.13.0/css/okta-theme.css" type="text/css" rel="stylesheet"/>-->

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
</head>

<body id="samples">


  <script>
console.log( sessionStorage.getItem("isCodeAvailable") != null);
    if (sessionStorage.getItem("isCodeAvailable") != null) {
     // document.getElementsByClassName('homecontent')[0].style.visibility = 'visible';
    } else {
    
      window.location.href = 'https://dev-497881.oktapreview.com//oauth2/default/v1/authorize?client_id=0oat0pm28wTzcJmey0h7&response_type=code&response_mode=query&prompt=none&scope=openid%20profile%20email&redirect_uri=http://localhost:8080/token&state=something&nonce=something';
    }
  </script>
  <div class="homecontent">
    <div th:replace="menu :: menu"></div>

    <div id="content" class="container">
      <h2>Social Login, Custom Login, and Spring Boot Example</h2>

      <div th:unless="${#authorization.expression('isAuthenticated()')}">
        <p>Hello!</p>
        <p>If you're viewing this page then you have successfully configured and started this example server.</p>
        <p>This example shows you how to use the <a href="https://github.com/okta/okta-spring-boot">Okta Spring Boot
            Starter</a> to add the <a
            href="https://developer.okta.com/authentication-guide/implementing-authentication/auth-code.html">Authorization
            Code Flow</a> to your application.</p>
        <p>We will also be adding social login buttons to the custom login page.</p>
        <p>When you click the login button below, you will be redirected to the login page on your Okta org. After you
          authenticate, you will be returned to this application.</p>
      </div>

      <div th:if="${#authorization.expression('isAuthenticated()')}">
        <p>Welcome back, <span th:text="${#authentication.name}">Joe Coder</span>!</p>
        <p>You have successfully authenticated against your Okta org, and have been redirected back to this application.
        </p>
        <p>Visit the <a th:href="@{/profile}">My Profile</a> page in this application to view the information retrieved
          with your OAuth Access Token.</p>
      </div>

      <form method="get" th:action="@{/authorization-code/callback}"
        th:unless="${#authorization.expression('isAuthenticated()')}">
        <button id="login-button" class="btn btn-primary" type="submit">Login</button>
      </form>
    </div>
  </div>
</body>

</html>